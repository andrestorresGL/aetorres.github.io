<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Andres Site</title>
    <description>Andres blog.</description>
    <link>http://localhost:4000/homepage/</link>
    <atom:link href="http://localhost:4000/homepage/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 20 Jun 2018 16:09:34 -0600</pubDate>
    <lastBuildDate>Wed, 20 Jun 2018 16:09:34 -0600</lastBuildDate>
    <generator>Jekyll v3.8.3</generator>
    
      <item>
        <title>How to delete Spot Instances using a Lambda function</title>
        <description>&lt;p&gt;I know, almost everybody knows how to delete instances using lambda functions, but, there are a little difference between a &lt;code class=&quot;highlighter-rouge&quot;&gt;regular EC2 instance&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;spot instaces&lt;/code&gt;.
In this case, letâ€™s say that the &lt;code class=&quot;highlighter-rouge&quot;&gt;spot instances&lt;/code&gt; are slaves or workers for the &lt;code class=&quot;highlighter-rouge&quot;&gt;EC2 instances&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You would need to use some additional libraries if you want this script works, those libraries are not isntalled by default on AWS, thats why you would need to build this script locally ( on your PC) before push it to AWS.&lt;/p&gt;

&lt;p&gt;Those libraries are &lt;code class=&quot;highlighter-rouge&quot;&gt;pytz&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;datetime&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I just added a small script that will install those libraries and compress the whole code before push it to AWS.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/env bash&lt;/span&gt;

pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; pytz
pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; datetime
pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; logging
zip &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; lamda.zip &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can se we look for all the spot instances that has been fulfilled ( created and running ), otherwise it will fail with cancelled instances or terminated instances;
also you can tell that we will terminate those &lt;code class=&quot;highlighter-rouge&quot;&gt;spot intances&lt;/code&gt; that have been working by more than 10h one by one.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import boto3
import logging
from datetime import datetime
from datetime import timedelta
from pytz import timezone
logger = logging.getLogger()
logger.setLevel(logging.DEBUG)




def lambda_handler(event, context):
    client = boto3.client('ec2')
    instances = client.describe_spot_instance_requests(Filters=[{'Name': 'status-code','Values': ['fulfilled']}] )
    est = timezone('&amp;lt;AZ timezone&amp;gt;')
    print est.localize(datetime.now())
    instance=[]
    for r in instances['SpotInstanceRequests']:
        print r['InstanceId']
        print r['Status']['UpdateTime']
        if r[&quot;CreateTime&quot;] &amp;lt; est.localize(datetime.now() - timedelta(hours=10)):
            print &quot;Instance Terminated Due more than 10h from creation time&quot;
            instance.append(r['InstanceId'])
            client.terminate_instances( DryRun=False, InstanceIds=instance )
        else:
            print &quot;Instance OK&quot;
    return 1


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 20 Jun 2018 00:00:00 -0600</pubDate>
        <link>http://localhost:4000/homepage/aws/2018/06/20/lambda.html</link>
        <guid isPermaLink="true">http://localhost:4000/homepage/aws/2018/06/20/lambda.html</guid>
        
        <category>lambda</category>
        
        <category>AWS</category>
        
        <category>Python</category>
        
        
        <category>AWS</category>
        
      </item>
    
      <item>
        <title>How to preconfigure user on Jenkins</title>
        <description>&lt;p&gt;If you want to have preconfigurated your admin user at Jenkins and also your path to your maven and JDK you could use the next groovy script that will be placed at &lt;code class=&quot;highlighter-rouge&quot;&gt;init.groovy.d&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
import hudson.security.*
import jenkins.model.*

def instance = Jenkins.getInstance()

def desc = instance.getDescriptor(&quot;hudson.tasks.Maven&quot;)
def minst =  new hudson.tasks.Maven.MavenInstallation(&quot;maven353&quot;, &quot;/usr/local/maven&quot;);
desc.setInstallations(minst)
desc.save()


def dis = new hudson.model.JDK.DescriptorImpl();
dis.setInstallations( new hudson.model.JDK(&quot;jdk8&quot;, &quot;/usr/java/jdk1.8.0_171-amd64&quot;));
dis.save();

def hudsonRealm = new HudsonPrivateSecurityRealm(false)
hudsonRealm.createAccount('admin', 'admin')
instance.setSecurityRealm(hudsonRealm)

def strategy = new FullControlOnceLoggedInAuthorizationStrategy()
instance.setAuthorizationStrategy(strategy)
instance.save()

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also if you want to override the Wizard Plugins screen you should add this 2 files at your Jenkins root path with the Jenkins version you are using.&lt;/p&gt;

&lt;p&gt;Files&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;jenkins.install.InstallUtil.lastExecVersion&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;jenkins.install.UpgradeWizard.state&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Content example&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 2.122
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sun, 20 May 2018 00:00:00 -0600</pubDate>
        <link>http://localhost:4000/homepage/jenkins/2018/05/20/jenkins2.html</link>
        <guid isPermaLink="true">http://localhost:4000/homepage/jenkins/2018/05/20/jenkins2.html</guid>
        
        <category>Jenkins</category>
        
        <category>admin</category>
        
        <category>Intallation</category>
        
        <category>groovy</category>
        
        
        <category>Jenkins</category>
        
      </item>
    
      <item>
        <title>How to preinstall plugins on Jenkins</title>
        <description>&lt;p&gt;If you ever wonder how to have your Jenkins server preconfigurated with your plugins before you even access to it by first time, let me show you how can you do it.&lt;/p&gt;

&lt;p&gt;First youâ€™ll need to create a directory called &lt;code class=&quot;highlighter-rouge&quot;&gt;init.groovy.d&lt;/code&gt; at the Jenkins root path, this folder will run every script that you put inside it on every restart; then youâ€™ll need to 
create a groovy file with your code. Ex. &lt;code class=&quot;highlighter-rouge&quot;&gt;plugins-add.groovy&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The plugins list (&lt;code class=&quot;highlighter-rouge&quot;&gt;pluginParameter&lt;/code&gt;) will be separated by spaces or the delimiter you prefer.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import jenkins.model.*
import java.util.logging.Logger
def logger = Logger.getLogger(&quot;&quot;)
def installed = false
def initialized = false
def pluginParameter=&quot; github maven-plugin job-dsl github-api.1.90 workflow-aggregator pipeline-utility-steps antisamy-markup-formatter ssh-agent startup-trigger-plugin pipeline-github dependency-check-jenkins-plugin&quot;
def plugins = pluginParameter.split()
logger.info(&quot;&quot; + plugins)
def instance = Jenkins.getInstance()
def pm = instance.getPluginManager()
def uc = instance.getUpdateCenter()
plugins.each {
  logger.info(&quot;Checking &quot; + it)
  if (!pm.getPlugin(it)) {
    logger.info(&quot;Looking UpdateCenter for &quot; + it)
    if (!initialized) {
      uc.updateAllSites()
      initialized = true
    }
    def plugin = uc.getPlugin(it)
    if (plugin) {
      logger.info(&quot;Installing &quot; + it)
    	def installFuture = plugin.deploy()
      while(!installFuture.isDone()) {
        logger.info(&quot;Waiting for plugin install: &quot; + it)
        sleep(3000)
      }
      installed = true
    }
  }
}
if (installed) {
  logger.info(&quot;Plugins installed, initializing a restart!&quot;)
  instance.save()
  instance.restart()
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sun, 20 May 2018 00:00:00 -0600</pubDate>
        <link>http://localhost:4000/homepage/jenkins/2018/05/20/jenkins1.html</link>
        <guid isPermaLink="true">http://localhost:4000/homepage/jenkins/2018/05/20/jenkins1.html</guid>
        
        <category>Jenkins</category>
        
        <category>Plugins</category>
        
        <category>Intallation</category>
        
        <category>groovy</category>
        
        
        <category>Jenkins</category>
        
      </item>
    
      <item>
        <title>code snippet test</title>
        <description>&lt;p&gt;This is a raw snippet:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hello world
123
This is a text snippet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a JavaScript snippet:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const add = (a, b) =&amp;gt; a + b
const minus = (a, b) =&amp;gt; a - b

console.log(add(100,200))  // 300
console.log(minus(100,200))  // -100
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a Python snippet:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def say_hello():
    print(&quot;hello world!&quot;)

say_hello()   // &quot;hello world!&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Side note comment: applied a bug fix similar to &lt;a href=&quot;https://github.com/Atlas7/atlas7.github.io/commit/6659f4a47f6ec66987adb0f683a9c6f3842252ae#diff-818954a41dbfb01af70050a459c603b9&quot;&gt;this commit&lt;/a&gt; to ensure code snippet does not collapse unexpectly upon clicking on it. This issue is tracked &lt;a href=&quot;https://github.com/jarrekk/Jalpc/issues/97&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Thu, 21 Dec 2017 00:00:00 -0600</pubDate>
        <link>http://localhost:4000/homepage/html/2017/12/21/test-code-snippets.html</link>
        <guid isPermaLink="true">http://localhost:4000/homepage/html/2017/12/21/test-code-snippets.html</guid>
        
        <category>Jalpc</category>
        
        <category>Jekyll</category>
        
        
        <category>HTML</category>
        
      </item>
    
      <item>
        <title>3 Steps (2 minutes) to Setup Your Personal Website with Jalpc</title>
        <description>&lt;p&gt;Everyone wants to have a personal website, you can display your infomation to public, post blogs and make friends. If you are CS engineer, haveing a self website will benefit your interview.&lt;/p&gt;

&lt;p&gt;So, if you like this website &lt;a href=&quot;https://jarrekk.github.io/Jalpc/&quot;&gt;https://jarrekk.github.io/Jalpc/&lt;/a&gt; or &lt;a href=&quot;http://www.jarrekk.com&quot;&gt;http://www.jarrekk.com&lt;/a&gt; and are willing to have a website, here is a way to build your website in 3 steps(2 minutes). Following are steps to setup your website(make sure you have basic knowledge of &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; and &lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt;, if you want to custom css/js &lt;a href=&quot;https://github.com/npm/npm&quot;&gt;NPM&lt;/a&gt; is needed):&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Fork &lt;a href=&quot;https://github.com/jarrekk/Jalpc&quot;&gt;this project â€“ Jalpc&lt;/a&gt; at &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;. If you want to edit website at github, do it as following gif or clone forked repository. &lt;code class=&quot;highlighter-rouge&quot;&gt;git clone git@github.com:github_username/Jalpc.git&lt;/code&gt;.&lt;/p&gt;

    &lt;p&gt;&lt;!-- ![edit](/homepage/static/assets/img/blog/3steps/edit.gif) --&gt;
 &lt;img src=&quot;/homepage/static/assets/img/blog/3steps/edit.gif&quot; width=&quot;75%&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Enter into repository directory and edit following file list:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;_config.yml&lt;/strong&gt;: edit â€˜Website settingsâ€™, â€˜authorâ€™, â€˜commentâ€™ and â€˜analyticsâ€™ items.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;_data/landing.yml&lt;/strong&gt;: custom sections of index page.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;_data/index/&lt;/strong&gt;: edit sectionsâ€™ data to yours at index page, please notice comment at each file.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;_data/blog.yml&lt;/strong&gt;: edit navbar(categories) of blog page, if you have different/more blog page, copy &lt;code class=&quot;highlighter-rouge&quot;&gt;blog/python.html&lt;/code&gt; and change it to your category HTML file, and edit &lt;strong&gt;Python&lt;/strong&gt;, &lt;strong&gt;/python/&lt;/strong&gt; to your category name at items &lt;strong&gt;title&lt;/strong&gt; and &lt;strong&gt;permalink&lt;/strong&gt;, make sure title is the same as permalink but capitalized first letter(except HTML).&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;CNAME&lt;/strong&gt;: If you wanna release website at your own domain name: edit it and create &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; branch; if you want to use &lt;em&gt;github_username.github.io&lt;/em&gt;: leave it blank.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Go to repoâ€™s settings panel, config &lt;strong&gt;GitHub Pages&lt;/strong&gt; section to make sure website is released.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Push changes to your github repository and view your website, done!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;From now on, you can post your blog to this website by creating md files at &lt;code class=&quot;highlighter-rouge&quot;&gt;post/&lt;/code&gt; directory and push it to GitHub, you can clear files at this directory before you post blogs.&lt;/p&gt;

&lt;p&gt;If you like this repository, I appreciate you star this repository. Please donâ€™t hesitate to mail me or post issues on GitHub if you have any questions. Hope you have a happy blog time!ðŸ˜Š&lt;/p&gt;
</description>
        <pubDate>Tue, 31 Jan 2017 00:00:00 -0600</pubDate>
        <link>http://localhost:4000/homepage/html/2017/01/31/3-steps-to-setup-website-with-Jalpc.html</link>
        <guid isPermaLink="true">http://localhost:4000/homepage/html/2017/01/31/3-steps-to-setup-website-with-Jalpc.html</guid>
        
        <category>Jalpc</category>
        
        <category>Jekyll</category>
        
        
        <category>HTML</category>
        
      </item>
    
  </channel>
</rss>
